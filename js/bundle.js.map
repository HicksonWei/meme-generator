{"version":3,"file":"bundle.js","sources":["index.dev.js"],"sourcesContent":["\"use strict\";\n\nvar topText = document.getElementById('topText');\nvar topTextSize = document.getElementById('topTextSize');\nvar topTextColor = document.getElementById('topTextColor');\nvar topTextStroke = document.getElementById('topTextStroke');\nvar topTextFont = document.getElementById('topTextFont');\nvar topTextBg = document.getElementById('topTextBg');\nvar bottomText = document.getElementById('bottomText');\nvar bottomTextSize = document.getElementById('bottomTextSize');\nvar bottomTextColor = document.getElementById('bottomTextColor');\nvar bottomTextStroke = document.getElementById('bottomTextStroke');\nvar bottomTextFont = document.getElementById('bottomTextFont');\nvar bottomTextBg = document.getElementById('bottomTextBg');\nvar modalBg = document.querySelector('.modal-bg');\nvar modal = document.querySelector('.modal');\nvar modalClose = document.querySelector('.modal-close');\nvar modalContent = document.querySelector('.modal-content');\nvar btnOK = document.querySelector('.btn_ok');\nvar btnTop = document.querySelector('.btn_top');\nvar rootElement = document.documentElement;\nvar imgPreviewDiv = document.getElementById('imgPreviewDiv');\nvar uploadBtnBlock = document.getElementById('uploadBtnBlock');\nvar sizeHint = document.getElementById('sizeHint');\nvar btnGroupDiv = document.getElementById('btnGroupDiv');\nvar imgUpload = document.getElementById('imgUpload');\nvar imgRenew = document.getElementById('imgRenew');\nvar imgDownload = document.getElementById('imgDownload');\nvar loading = document.getElementById('loading');\nvar canvas = document.getElementById('canvas');\nvar ctx = canvas.getContext('2d');\nvar topFont = 'Acme';\nvar bottomFont = 'Acme';\nvar bgArr = ['transparent', 'black', 'white'];\nvar topBg = 'transparent';\nvar bottomBg = 'transparent';\nvar img = new Image();\nvar fileName;\nvar fileType;\n\nfunction init() {\n  canvas.width = 0;\n  canvas.height = 0;\n  imgUpload.addEventListener('change', function () {\n    var file = this.files[0];\n\n    if (file) {\n      if (file.size / 1024 / 1024 > 3) {\n        showAlert('The file size exceeds the maximum limit (3MB).');\n        this.value = null;\n        return;\n      }\n\n      if (file.type != 'image/jpeg' && file.type != 'image/png') {\n        showAlert('Invalid file type.');\n        this.value = null;\n        return;\n      }\n\n      var reader = new FileReader();\n      reader.addEventListener('load', function () {\n        loading.classList.add('active');\n\n        img.onload = function () {\n          loading.classList.remove('active');\n\n          if (img.width / img.height > 1.78 || img.width / img.height < 0.56) {\n            showAlert('wrong size');\n            return;\n          }\n\n          canvas.width = img.width;\n          canvas.height = img.height;\n          imgPreviewDiv.style.minHeight = 'auto';\n          imgPreviewDiv.style.minWidth = 'auto';\n          uploadBtnBlock.style.display = 'none';\n          btnGroupDiv.style.display = 'flex';\n          sizeHint.style.display = 'block';\n          sizeHint.innerText = \"Original size: \".concat(img.width, \" \\xD7 \").concat(img.height);\n          fileName = file.name;\n          fileType = file.type;\n          canvasRender();\n        };\n\n        img.src = reader.result;\n      });\n      reader.readAsDataURL(file);\n    }\n  });\n  imgRenew.addEventListener('change', function () {\n    var file = this.files[0];\n    console.log(file.name);\n    console.log(file.type);\n\n    if (file) {\n      if (file.size / 1024 / 1024 > 3) {\n        showAlert('The file size exceeds the maximum limit (3MB).');\n        this.value = null;\n        return;\n      }\n\n      if (file.type != 'image/jpeg' && file.type != 'image/png') {\n        showAlert('Invalid file type.');\n        this.value = null;\n        return;\n      }\n\n      var reader = new FileReader();\n      reader.addEventListener('load', function () {\n        loading.classList.add('active');\n\n        img.onload = function () {\n          loading.classList.remove('active');\n\n          if (img.width / img.height > 1.78 || img.width / img.height < 0.56) {\n            showAlert('Invalid width/height ratio. (16:9 ~ 9:16)');\n            return;\n          }\n\n          canvas.width = img.width;\n          canvas.height = img.height;\n          sizeHint.innerText = \"Original size: \".concat(img.width, \" \\xD7 \").concat(img.height);\n          fileName = file.name;\n          fileType = file.type;\n          canvasRender();\n        };\n\n        img.src = reader.result;\n      });\n      reader.readAsDataURL(file);\n    }\n  });\n  imgDownload.addEventListener('click', function () {\n    var link = document.createElement('a');\n    link.download = fileName;\n\n    if (fileType === 'image/jpeg') {\n      link.href = canvas.toDataURL('image/jpeg');\n    }\n\n    if (fileType === 'image/png') {\n      link.href = canvas.toDataURL('image/png');\n    }\n\n    link.click();\n  });\n  modalClose.addEventListener('click', hideAlert);\n  btnOK.addEventListener('click', hideAlert);\n  btnTop.addEventListener('click', function () {\n    rootElement.scrollTo({\n      top: 0,\n      behavior: 'smooth'\n    });\n  });\n  document.addEventListener('scroll', function () {\n    var scrollTotal = rootElement.scrollHeight - rootElement.clientHeight;\n\n    if (rootElement.scrollTop / scrollTotal >= 0.4) {\n      btnTop.classList.add('show');\n    } else {\n      btnTop.classList.remove('show');\n    }\n  });\n}\n\nfunction canvasRenderListener(dom, event, actionFunc) {\n  dom.addEventListener(event, function (e) {\n    if (actionFunc) {\n      actionFunc(e);\n    }\n\n    if (img.src) {\n      canvasRender();\n    }\n  });\n}\n\nfunction bgSwitch(dom, targetBg) {\n  var _this = this;\n\n  var index = bgArr.findIndex(function (item) {\n    return item === _this[targetBg];\n  });\n\n  if (index >= 2) {\n    this[targetBg] = bgArr[0];\n  } else {\n    this[targetBg] = bgArr[index + 1];\n  }\n\n  dom.innerText = this[targetBg];\n  dom.classList = [];\n  dom.classList.add(this[targetBg]);\n}\n\nfunction fontSwitch(tragetFont, assignValue) {\n  this[tragetFont] = assignValue;\n}\n\nfunction showAlert(text) {\n  modalBg.classList.add('show');\n  modalContent.innerText = text;\n}\n\nfunction hideAlert() {\n  modalBg.classList.remove('show');\n}\n\nfunction canvasRender() {\n  ctx.clearRect(0, 0, canvas.width, canvas.height);\n  ctx.drawImage(img, 0, 0);\n  var fontSize; \n\n  ctx.strokeStyle = '#ffffff'; \n\n  ctx.textAlign = 'center'; \n\n  fontSize = canvas.width * topTextSize.value; \n\n  ctx.fillStyle = topBg; \n\n  ctx.fillRect(0, 0, canvas.width, topText.value.split('\\n')[0] != '' ? topText.value.split('\\n').length * fontSize + 40 : 0); \n\n  ctx.fillStyle = topTextColor.value; \n\n  ctx.strokeStyle = topTextStroke.checked ? 'black' : topTextColor.value; \n\n  ctx.font = \"\".concat(fontSize, \"px \").concat(topFont); \n\n  ctx.lineWidth = 2; \n\n  ctx.textBaseline = 'top';\n  topText.value.split('\\n').forEach(function (text, i) {\n    ctx.fillText(text, canvas.width / 2, i * fontSize + 30, canvas.width); \n\n    ctx.strokeText(text, canvas.width / 2, i * fontSize + 30, canvas.width);\n  }); \n\n  fontSize = canvas.width * bottomTextSize.value; \n\n  ctx.fillStyle = bottomBg; \n\n  ctx.fillRect(0, canvas.height, canvas.width, bottomText.value.split('\\n')[0] != '' ? -(bottomText.value.split('\\n').length * fontSize + 60) : 0); \n\n  ctx.fillStyle = bottomTextColor.value; \n\n  ctx.strokeStyle = bottomTextStroke.checked ? 'black' : bottomTextColor.value; \n\n  ctx.font = \"\".concat(fontSize, \"px \").concat(bottomFont); \n\n  ctx.lineWidth = 2; \n\n  ctx.textBaseline = 'bottom';\n  bottomText.value.split('\\n').reverse().forEach(function (text, i) {\n    ctx.fillText(text, canvas.width / 2, canvas.height - i * fontSize - 30, canvas.width);\n    ctx.strokeText(text, canvas.width / 2, canvas.height - i * fontSize - 30, canvas.width);\n  });\n}\n\ninit();\ncanvasRenderListener(topText, 'input');\ncanvasRenderListener(topTextSize, 'input');\ncanvasRenderListener(topTextColor, 'input');\ncanvasRenderListener(topTextStroke, 'change');\ncanvasRenderListener(topTextFont, 'change', function (e) {\n  return fontSwitch.call(window, 'topFont', e.target.value);\n});\ncanvasRenderListener(topTextBg, 'click', function (e) {\n  return bgSwitch.call(window, topTextBg, 'topBg');\n});\ncanvasRenderListener(bottomText, 'input');\ncanvasRenderListener(bottomTextSize, 'input');\ncanvasRenderListener(bottomTextColor, 'input');\ncanvasRenderListener(bottomTextStroke, 'change');\ncanvasRenderListener(bottomTextFont, 'change', function (e) {\n  fontSwitch.call(window, 'bottomFont', e.target.value);\n});\ncanvasRenderListener(bottomTextBg, 'click', function (e) {\n  return bgSwitch.call(window, bottomTextBg, 'bottomBg');\n});"],"names":["fileName","fileType","topText","document","getElementById","topTextSize","topTextColor","topTextStroke","topTextFont","topTextBg","bottomText","bottomTextSize","bottomTextColor","bottomTextStroke","bottomTextFont","bottomTextBg","modalBg","querySelector","modal","modalClose","modalContent","btnOK","btnTop","rootElement","documentElement","imgPreviewDiv","uploadBtnBlock","sizeHint","btnGroupDiv","imgUpload","imgRenew","imgDownload","loading","canvas","ctx","getContext","topFont","bottomFont","bgArr","topBg","bottomBg","img","Image","init","width","height","addEventListener","file","this","files","size","showAlert","value","type","reader","FileReader","classList","add","onload","remove","style","minHeight","minWidth","display","innerText","concat","name","canvasRender","src","result","readAsDataURL","link","createElement","download","href","toDataURL","click","hideAlert","scrollTo","top","behavior","scrollTotal","scrollHeight","clientHeight","scrollTop","canvasRenderListener","dom","event","actionFunc","e","bgSwitch","targetBg","_this","index","findIndex","item","fontSwitch","tragetFont","assignValue","text","fontSize","clearRect","drawImage","strokeStyle","textAlign","fillStyle","fillRect","split","length","checked","font","lineWidth","textBaseline","forEach","i","fillText","strokeText","reverse","call","window","target"],"mappings":"aAEA,IAmCIA,SACAC,SApCAC,QAAUC,SAASC,eAAe,WAClCC,YAAcF,SAASC,eAAe,eACtCE,aAAeH,SAASC,eAAe,gBACvCG,cAAgBJ,SAASC,eAAe,iBACxCI,YAAcL,SAASC,eAAe,eACtCK,UAAYN,SAASC,eAAe,aACpCM,WAAaP,SAASC,eAAe,cACrCO,eAAiBR,SAASC,eAAe,kBACzCQ,gBAAkBT,SAASC,eAAe,mBAC1CS,iBAAmBV,SAASC,eAAe,oBAC3CU,eAAiBX,SAASC,eAAe,kBACzCW,aAAeZ,SAASC,eAAe,gBACvCY,QAAUb,SAASc,cAAc,aACjCC,MAAQf,SAASc,cAAc,UAC/BE,WAAahB,SAASc,cAAc,gBACpCG,aAAejB,SAASc,cAAc,kBACtCI,MAAQlB,SAASc,cAAc,WAC/BK,OAASnB,SAASc,cAAc,YAChCM,YAAcpB,SAASqB,gBACvBC,cAAgBtB,SAASC,eAAe,iBACxCsB,eAAiBvB,SAASC,eAAe,kBACzCuB,SAAWxB,SAASC,eAAe,YACnCwB,YAAczB,SAASC,eAAe,eACtCyB,UAAY1B,SAASC,eAAe,aACpC0B,SAAW3B,SAASC,eAAe,YACnC2B,YAAc5B,SAASC,eAAe,eACtC4B,QAAU7B,SAASC,eAAe,WAClC6B,OAAS9B,SAASC,eAAe,UACjC8B,IAAMD,OAAOE,WAAW,MACxBC,QAAU,OACVC,WAAa,OACbC,MAAQ,CAAC,cAAe,QAAS,SACjCC,MAAQ,cACRC,SAAW,cACXC,IAAM,IAAIC,MAId,SAASC,OACPV,OAAOW,MAAQ,EACfX,OAAOY,OAAS,EAChBhB,UAAUiB,iBAAiB,SAAU,WACnC,IAAIC,EAAOC,KAAKC,MAAM,GAEtB,GAAIF,EAAM,CACR,GAA8B,EAA1BA,EAAKG,KAAO,KAAO,KAGrB,OAFAC,UAAU,uDACVH,KAAKI,MAAQ,MAIf,GAAiB,cAAbL,EAAKM,MAAqC,aAAbN,EAAKM,KAGpC,OAFAF,UAAU,2BACVH,KAAKI,MAAQ,MAIf,IAAIE,EAAS,IAAIC,WACjBD,EAAOR,iBAAiB,OAAQ,WAC9Bd,QAAQwB,UAAUC,IAAI,UAEtBhB,IAAIiB,OAAS,WACX1B,QAAQwB,UAAUG,OAAO,UAEI,KAAzBlB,IAAIG,MAAQH,IAAII,QAAiBJ,IAAIG,MAAQH,IAAII,OAAS,IAC5DM,UAAU,eAIZlB,OAAOW,MAAQH,IAAIG,MACnBX,OAAOY,OAASJ,IAAII,OACpBpB,cAAcmC,MAAMC,UAAY,OAChCpC,cAAcmC,MAAME,SAAW,OAC/BpC,eAAekC,MAAMG,QAAU,OAC/BnC,YAAYgC,MAAMG,QAAU,OAC5BpC,SAASiC,MAAMG,QAAU,QACzBpC,SAASqC,UAAY,kBAAkBC,OAAOxB,IAAIG,MAAO,OAAUqB,OAAOxB,IAAII,QAC9E7C,SAAW+C,EAAKmB,KAChBjE,SAAW8C,EAAKM,KAChBc,iBAGF1B,IAAI2B,IAAMd,EAAOe,SAEnBf,EAAOgB,cAAcvB,MAGzBjB,SAASgB,iBAAiB,SAAU,WAClC,IAAIC,EAAOC,KAAKC,MAAM,GAItB,GAAIF,EAAM,CACR,GAA8B,EAA1BA,EAAKG,KAAO,KAAO,KAGrB,OAFAC,UAAU,uDACVH,KAAKI,MAAQ,MAIf,GAAiB,cAAbL,EAAKM,MAAqC,aAAbN,EAAKM,KAGpC,OAFAF,UAAU,2BACVH,KAAKI,MAAQ,MAIf,IAAIE,EAAS,IAAIC,WACjBD,EAAOR,iBAAiB,OAAQ,WAC9Bd,QAAQwB,UAAUC,IAAI,UAEtBhB,IAAIiB,OAAS,WACX1B,QAAQwB,UAAUG,OAAO,UAEI,KAAzBlB,IAAIG,MAAQH,IAAII,QAAiBJ,IAAIG,MAAQH,IAAII,OAAS,IAC5DM,UAAU,8CAIZlB,OAAOW,MAAQH,IAAIG,MACnBX,OAAOY,OAASJ,IAAII,OACpBlB,SAASqC,UAAY,kBAAkBC,OAAOxB,IAAIG,MAAO,OAAUqB,OAAOxB,IAAII,QAC9E7C,SAAW+C,EAAKmB,KAChBjE,SAAW8C,EAAKM,KAChBc,iBAGF1B,IAAI2B,IAAMd,EAAOe,SAEnBf,EAAOgB,cAAcvB,MAGzBhB,YAAYe,iBAAiB,QAAS,WACpC,IAAIyB,EAAOpE,SAASqE,cAAc,KAClCD,EAAKE,SAAWzE,SAEC,eAAbC,WACFsE,EAAKG,KAAOzC,OAAO0C,UAAU,eAGd,cAAb1E,WACFsE,EAAKG,KAAOzC,OAAO0C,UAAU,cAG/BJ,EAAKK,UAEPzD,WAAW2B,iBAAiB,QAAS+B,WACrCxD,MAAMyB,iBAAiB,QAAS+B,WAChCvD,OAAOwB,iBAAiB,QAAS,WAC/BvB,YAAYuD,SAAS,CACnBC,IAAK,EACLC,SAAU,aAGd7E,SAAS2C,iBAAiB,SAAU,WAClC,IAAImC,EAAc1D,YAAY2D,aAAe3D,YAAY4D,aAEd,IAAvC5D,YAAY6D,UAAYH,EAC1B3D,OAAOkC,UAAUC,IAAI,QAErBnC,OAAOkC,UAAUG,OAAO,UAK9B,SAAS0B,qBAAqBC,EAAKC,EAAOC,GACxCF,EAAIxC,iBAAiByC,EAAO,SAAUE,GAChCD,GACFA,EAAWC,GAGThD,IAAI2B,KACND,iBAKN,SAASuB,SAASJ,EAAKK,GACrB,IAAIC,EAAQ5C,KAER6C,EAAQvD,MAAMwD,UAAU,SAAUC,GACpC,OAAOA,IAASH,EAAMD,KAItB3C,KAAK2C,GADM,GAATE,EACevD,MAAM,GAENA,MAAMuD,EAAQ,GAGjCP,EAAItB,UAAYhB,KAAK2C,GACrBL,EAAI9B,UAAY,GAChB8B,EAAI9B,UAAUC,IAAIT,KAAK2C,IAGzB,SAASK,WAAWC,EAAYC,GAC9BlD,KAAKiD,GAAcC,EAGrB,SAAS/C,UAAUgD,GACjBnF,QAAQwC,UAAUC,IAAI,QACtBrC,aAAa4C,UAAYmC,EAG3B,SAAStB,YACP7D,QAAQwC,UAAUG,OAAO,QAG3B,SAASQ,eAGP,IAAIiC,EAFJlE,IAAImE,UAAU,EAAG,EAAGpE,OAAOW,MAAOX,OAAOY,QACzCX,IAAIoE,UAAU7D,IAAK,EAAG,GAGtBP,IAAIqE,YAAc,UAElBrE,IAAIsE,UAAY,SAEhBJ,EAAWnE,OAAOW,MAAQvC,YAAY+C,MAEtClB,IAAIuE,UAAYlE,MAEhBL,IAAIwE,SAAS,EAAG,EAAGzE,OAAOW,MAAuC,IAAhC1C,QAAQkD,MAAMuD,MAAM,MAAM,GAAWzG,QAAQkD,MAAMuD,MAAM,MAAMC,OAASR,EAAW,GAAK,GAEzHlE,IAAIuE,UAAYnG,aAAa8C,MAE7BlB,IAAIqE,YAAchG,cAAcsG,QAAU,QAAUvG,aAAa8C,MAEjElB,IAAI4E,KAAO,GAAG7C,OAAOmC,EAAU,OAAOnC,OAAO7B,SAE7CF,IAAI6E,UAAY,EAEhB7E,IAAI8E,aAAe,MACnB9G,QAAQkD,MAAMuD,MAAM,MAAMM,QAAQ,SAAUd,EAAMe,GAChDhF,IAAIiF,SAAShB,EAAMlE,OAAOW,MAAQ,EAAGsE,EAAId,EAAW,GAAInE,OAAOW,OAE/DV,IAAIkF,WAAWjB,EAAMlE,OAAOW,MAAQ,EAAGsE,EAAId,EAAW,GAAInE,OAAOW,SAGnEwD,EAAWnE,OAAOW,MAAQjC,eAAeyC,MAEzClB,IAAIuE,UAAYjE,SAEhBN,IAAIwE,SAAS,EAAGzE,OAAOY,OAAQZ,OAAOW,MAA0C,IAAnClC,WAAW0C,MAAMuD,MAAM,MAAM,KAAajG,WAAW0C,MAAMuD,MAAM,MAAMC,OAASR,EAAW,IAAM,GAE9IlE,IAAIuE,UAAY7F,gBAAgBwC,MAEhClB,IAAIqE,YAAc1F,iBAAiBgG,QAAU,QAAUjG,gBAAgBwC,MAEvElB,IAAI4E,KAAO,GAAG7C,OAAOmC,EAAU,OAAOnC,OAAO5B,YAE7CH,IAAI6E,UAAY,EAEhB7E,IAAI8E,aAAe,SACnBtG,WAAW0C,MAAMuD,MAAM,MAAMU,UAAUJ,QAAQ,SAAUd,EAAMe,GAC7DhF,IAAIiF,SAAShB,EAAMlE,OAAOW,MAAQ,EAAGX,OAAOY,OAASqE,EAAId,EAAW,GAAInE,OAAOW,OAC/EV,IAAIkF,WAAWjB,EAAMlE,OAAOW,MAAQ,EAAGX,OAAOY,OAASqE,EAAId,EAAW,GAAInE,OAAOW,SAIrFD,OACA0C,qBAAqBnF,QAAS,SAC9BmF,qBAAqBhF,YAAa,SAClCgF,qBAAqB/E,aAAc,SACnC+E,qBAAqB9E,cAAe,UACpC8E,qBAAqB7E,YAAa,SAAU,SAAUiF,GACpD,OAAOO,WAAWsB,KAAKC,OAAQ,UAAW9B,EAAE+B,OAAOpE,SAErDiC,qBAAqB5E,UAAW,QAAS,SAAUgF,GACjD,OAAOC,SAAS4B,KAAKC,OAAQ9G,UAAW,WAE1C4E,qBAAqB3E,WAAY,SACjC2E,qBAAqB1E,eAAgB,SACrC0E,qBAAqBzE,gBAAiB,SACtCyE,qBAAqBxE,iBAAkB,UACvCwE,qBAAqBvE,eAAgB,SAAU,SAAU2E,GACvDO,WAAWsB,KAAKC,OAAQ,aAAc9B,EAAE+B,OAAOpE,SAEjDiC,qBAAqBtE,aAAc,QAAS,SAAU0E,GACpD,OAAOC,SAAS4B,KAAKC,OAAQxG,aAAc"}